<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GPS Tracker</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        body { margin: 0; padding: 20px; font-family: Arial; }
        #map { height: 500px; border: 2px solid #333; }
        .data { background: #f0f0f0; padding: 15px; margin: 10px 0; border-radius: 10px; }
    </style>
    <style>
        body {
    max-width: 1000px;
    margin: 0 auto;
    padding: 20px;
    background: linear-gradient(to right, #667eea, #764ba2);
    color: white;
}

#map {
    border-radius: 15px;
    overflow: hidden;
    box-shadow: 0 10px 30px rgba(0,0,0,0.3);
}
    </style>
</head>
<body>
    <h1>ğŸš— Ù…ÙˆÙ‚Ø¹ ØªØªØ¨Ø¹ GPS</h1>
    
    <div class="data">
        <p>ğŸ“ <strong>Ø§Ù„Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª:</strong> <span id="coords">--, --</span></p>
        <p>ğŸš€ <strong>Ø§Ù„Ø³Ø±Ø¹Ø©:</strong> <span id="speed">0</span> ÙƒÙ…/Ø³</p>
        <p>ğŸ›°ï¸ <strong>Ø§Ù„Ø£Ù‚Ù…Ø§Ø±:</strong> <span id="sat">0</span></p>
        <p>â±ï¸ <strong>Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«:</strong> <span id="time">--:--:--</span></p>
    </div>
    
    <div id="map"></div>
    
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        // 1. ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø®Ø±ÙŠØ·Ø©
        var map = L.map('map').setView([33.31, 44.42], 13);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);
        
        var marker = L.marker([33.31, 44.42]).addTo(map);
        var path = L.polyline([], {color: 'red'}).addTo(map);
        
        // 2. Ø¯Ø§Ù„Ø© Ù„Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        function fetchData() {
            // Ù‡Ù†Ø§ Ø³Ù†Ø¶Ø¹ Ø±Ø§Ø¨Ø· Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ Ù„Ø§Ø­Ù‚Ø§Ù‹
            var testData = {
                lat: 33.309772 + (Math.random() * 0.01 - 0.005),
                lng: 44.421445 + (Math.random() * 0.01 - 0.005),
                speed: (Math.random() * 100).toFixed(1),
                sat: Math.floor(Math.random() * 12) + 4
            };
            
            updateDisplay(testData);
        }
        
        // 3. Ø¯Ø§Ù„Ø© ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø±Ø¶
        function updateDisplay(data) {
            document.getElementById('coords').textContent = 
                data.lat.toFixed(6) + ', ' + data.lng.toFixed(6);
            document.getElementById('speed').textContent = data.speed;
            document.getElementById('sat').textContent = data.sat;
            document.getElementById('time').textContent = new Date().toLocaleTimeString();
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø®Ø±ÙŠØ·Ø©
            var newPos = [data.lat, data.lng];
            marker.setLatLng(newPos);
            map.setView(newPos, 16);
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø³Ø§Ø±
            var currentPath = path.getLatLngs();
            currentPath.push(newPos);
            path.setLatLngs(currentPath);
        }
        
        // 4. ØªØ­Ø¯ÙŠØ« ÙƒÙ„ 3 Ø«ÙˆØ§Ù†
        setInterval(fetchData, 3000);
        fetchData(); // Ø§Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„Ø£ÙˆÙ„
    </script>
</body>
</html>
